local Library = loadstring(game:HttpGetAsync("https://github.com/ActualMasterOogway/Fluent-Renewed/releases/latest/download/Fluent.luau"))()
local SaveManager = loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/ActualMasterOogway/Fluent-Renewed/master/Addons/SaveManager.luau"))()
local InterfaceManager = loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/ActualMasterOogway/Fluent-Renewed/master/Addons/InterfaceManager.luau"))()

local Window = Library:Window{
    Title = "Pull A Sword Events",
    SubTitle = "By coco",
    TabWidth = 130,
    Size =  UDim2.fromOffset(500, 430),
    Resize = false, 
    Theme = "Darker",
    MinimizeKey = Enum.KeyCode.LeftShift
}

-- Tabs
local Tabs = {
    Stuff1 = Window:CreateTab{Title = "Main Game", Icon = "phosphor-sword-bold"}
    Settings = Window:CreateTab{Title = "Settings", Icon = "phosphor-sword-bold"},
}

local Options = Library.Options

local autoWinToggle = Tabs.Stuff1:CreateToggle("AutoWin", {Title = "Auto Win", Default = false})

autoWinToggle:OnChanged(function(state)
    local Players = game:GetService("Players")
    local TweenService = game:GetService("TweenService")
    local player = Players.LocalPlayer
    local char = player.Character or player.CharacterAdded:Wait()
    local hrp = char:WaitForChild("HumanoidRootPart")
    local target = workspace:WaitForChild("FinishSegment"):WaitForChild("DetectorPart")

    if state then
        task.spawn(function()
            while autoWinToggle.Value do
                -- Add float if not already present
                if not hrp:FindFirstChild("FloatVelocity") then
                    local bv = Instance.new("BodyVelocity")
                    bv.Name = "FloatVelocity"
                    bv.Velocity = Vector3.new(0,0,0)
                    bv.MaxForce = Vector3.new(0, math.huge, 0)
                    bv.Parent = hrp
                end

                -- Teleport to start
                hrp.CFrame = CFrame.new(3,32,-171)

                -- Tween to target
                local tween = TweenService:Create(hrp, TweenInfo.new((hrp.Position - target.Position).Magnitude / 10, Enum.EasingStyle.Linear), {CFrame = target.CFrame})
                tween:Play()
                tween.Completed:Wait()

                -- Wait 2 seconds at target
                task.wait(4)
            end

            -- Cleanup: remove float if toggle turned off
            local bv = hrp:FindFirstChild("FloatVelocity")
            if bv then bv:Destroy() end
        end)
    else
        -- Remove float if toggle turned off manually
        local bv = hrp:FindFirstChild("FloatVelocity")
        if bv then bv:Destroy() end
    end
end)

--------------------------------------------------
-- CONFIGURATION / MANAGERS
--------------------------------------------------

SaveManager:SetLibrary(Library)
InterfaceManager:SetLibrary(Library)

SaveManager:IgnoreThemeSettings()
SaveManager:SetIgnoreIndexes({})

InterfaceManager:SetFolder("FluentEventsHub")
SaveManager:SetFolder("FluentEventsHub/SpecificGame")

InterfaceManager:BuildInterfaceSection(Tabs.Settings)
SaveManager:BuildConfigSection(Tabs.Settings)

Window:SelectTab(1)
Library:Notify{Title = "Fluent", Content = "Script loaded successfully!", Duration = 8}
SaveManager:LoadAutoloadConfig()
