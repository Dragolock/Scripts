local Library = loadstring(game:HttpGetAsync("https://github.com/ActualMasterOogway/Fluent-Renewed/releases/latest/download/Fluent.luau"))()
local SaveManager = loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/ActualMasterOogway/Fluent-Renewed/master/Addons/SaveManager.luau"))()
local InterfaceManager = loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/ActualMasterOogway/Fluent-Renewed/master/Addons/InterfaceManager.luau"))()

local Window = Library:Window{
    Title = "Pull A Sword Events",
    SubTitle = "By coco",
    TabWidth = 130,
    Size =  UDim2.fromOffset(500, 430),
    Resize = false, 
    Theme = "Darker",
    MinimizeKey = Enum.KeyCode.LeftShift
}

-- Tabs
local Tabs = {
    Stuff1 = Window:CreateTab{Title = "Main Game", Icon = "phosphor-sword-bold"},
    Settings = Window:CreateTab{Title = "Settings", Icon = "phosphor-sword-bold"}
}

local Options = Library.Options

local RunService = game:GetService("RunService")
local player = game:GetService("Players").LocalPlayer

Tabs.Stuff1:CreateToggle("AutoWinTest", {Title = "Auto Win", Default = false}):OnChanged(function(state)
    local char = player.Character or player.CharacterAdded:Wait()
    local hrp = char:WaitForChild("HumanoidRootPart")

    local function setFloat(enabled)
        local bv = hrp:FindFirstChild("WRDBodyVelocity")
        if enabled and not bv then
            bv = Instance.new("BodyVelocity", hrp)
            bv.Name = "WRDBodyVelocity"
            bv.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
            bv.Velocity = Vector3.new()
        elseif not enabled and bv then
            bv:Destroy()
        end
    end

    if state then
        setFloat(true)

        task.spawn(function()
            local targets = { Vector3.new(3, 32, -171), Vector3.new(2, -2043, -5464) }
            local travelTime = 5 -- seconds to get to each point

            while Options.AutoWinTest.Value do
                for _, pos in ipairs(targets) do
                    local startTime = tick()
                    local startCFrame = hrp.CFrame
                    local endCFrame = CFrame.new(pos)

                    while tick() - startTime < travelTime and Options.AutoWinTest.Value do
                        local alpha = (tick() - startTime) / travelTime
                        hrp.CFrame = startCFrame:Lerp(endCFrame, alpha)
                        RunService.RenderStepped:Wait()
                    end

                    hrp.CFrame = endCFrame
                    task.wait(0.1) -- short pause before next loop
                end
                task.wait(4) -- extra wait after completing full cycle
            end
        end)
    else
        setFloat(false)
        Options.AutoWinTest.Value = false
    end
end)

Tabs.Stuff1:CreateToggle("AutoWinTest2", {Title = "Auto Win test", Default = false}):OnChanged(function(state)
    local char = player.Character or player.CharacterAdded:Wait()
    local hrp = char:WaitForChild("HumanoidRootPart")

    local function smoothTeleport(targetPos, duration)
        local startTime = tick()
        local startCFrame = hrp.CFrame
        local endCFrame = CFrame.new(targetPos)
        while tick() - startTime < duration do
            local alpha = (tick() - startTime) / duration
            hrp.CFrame = startCFrame:Lerp(endCFrame, alpha)
            RunService.RenderStepped:Wait()
        end
        hrp.CFrame = endCFrame
    end

    if state then
        task.spawn(function()
            while Options.AutoWinTest2.Value do
                smoothTeleport(Vector3.new(3, 32, -171), 1)
                task.wait(1)
                hrp.CFrame = CFrame.new(2, -2043, -5464)
                task.wait(4)
            end
        end)
    end
end)


--------------------------------------------------
-- CONFIGURATION / MANAGERS
--------------------------------------------------

SaveManager:SetLibrary(Library)
InterfaceManager:SetLibrary(Library)

SaveManager:IgnoreThemeSettings()
SaveManager:SetIgnoreIndexes({})

InterfaceManager:SetFolder("FluentEventsHub")
SaveManager:SetFolder("FluentEventsHub/SpecificGame")

InterfaceManager:BuildInterfaceSection(Tabs.Settings)
SaveManager:BuildConfigSection(Tabs.Settings)

Window:SelectTab(1)
Library:Notify{Title = "Fluent", Content = "Script loaded successfully!", Duration = 8}
SaveManager:LoadAutoloadConfig()
