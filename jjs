local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local player = Players.LocalPlayer
local combatRemote = ReplicatedStorage
    :WaitForChild("Remote")
    :WaitForChild("Event")
    :WaitForChild("Combat")
    :WaitForChild("M1")

local folders = {
    workspace:WaitForChild("Mob"),
    workspace:WaitForChild("MobModel")
}

local RADIUS = 200

local function getCharacterRoot()
    local char = player.Character
    if char then
        return char:FindFirstChild("HumanoidRootPart")
    end
end

while task.wait(0.1) do
    local root = getCharacterRoot()
    if not root then continue end

    for _, folder in ipairs(folders) do
        for _, mob in ipairs(folder:GetChildren()) do
            if mob:IsA("Model") then
                local mobRoot = mob:FindFirstChild("HumanoidRootPart")
                local uuid = mob:GetAttribute("UUID")

                if mobRoot and uuid then
                    local distance = (mobRoot.Position - root.Position).Magnitude
                    if distance <= RADIUS then
                        combatRemote:FireServer({ uuid })
                    end
                end
            end
        end
    end
end
