local Library = loadstring(game:HttpGetAsync("https://github.com/ActualMasterOogway/Fluent-Renewed/releases/latest/download/Fluent.luau"))()
local SaveManager = loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/ActualMasterOogway/Fluent-Renewed/master/Addons/SaveManager.luau"))()
local InterfaceManager = loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/ActualMasterOogway/Fluent-Renewed/master/Addons/InterfaceManager.luau"))()

local Window = Library:Window{
    Title = "CHub - +1 Jump A Second",
    SubTitle = "By coco",
    TabWidth = 100,
    Size =  UDim2.fromOffset(350, 250),
    Resize = false, 
    Theme = "United GNOME",
    MinimizeKey = Enum.KeyCode.LeftShift
}

-- Tabs
local Tabs = {
    mainTab = Window:CreateTab{Title = "Main Game", Icon = "phosphor-sword-bold"},
    Settings = Window:CreateTab{Title = "Settings", Icon = "phosphor-sword-bold"}
}

local Options = Library.Options

--------------------------------------------------
-- ABYSS EVENT TAB
--------------------------------------------------



--// Services
local Players = game:GetService("Players")

--// Get Player Names
local function getPlayerNames()
    local names = {}
    for _, player in ipairs(Players:GetPlayers()) do
        table.insert(names, player.Name)
    end
    return names
end

--// Stat lists
local mainStats = {
    "Cubes","Generations","GrandTime","LocksLeft","Rank","RerollsLeft",
    "Clicks","ServerClicks","Stars","Title","Eons","Time","Universes"
}

local secondLeaderStats = {
    "Earons","Quantum"
}

local lockedStats = {
    "Eons","Generations","GrandTime","Stars","Time","Universes"
}

--// Safe stat getter
local function getValue(folder, statName)
    if folder then
        local stat = folder:FindFirstChild(statName)
        if stat and stat:IsA("ValueBase") then
            return tostring(stat.Value)
        end
    end
    return "N/A"
end

--// Selected Player
local selectedPlayerName = nil
local playerNames = getPlayerNames()

--// Dropdown
local dropdownRef = Tabs.mainTab:CreateDropdown({
    Title = "Select Player",
    Values = playerNames,
    Multi = false,
    Default = 1,
    Callback = function(value)
        selectedPlayerName = value
    end
})

-- Set default
dropdownRef:SetValues(playerNames)
dropdownRef:SetValue(playerNames[1] or "")
selectedPlayerName = playerNames[1]

--// Refresh Button (like your PvP example)
Tabs.mainTab:CreateButton({
    Title = "Refresh Players",
    Callback = function()
        playerNames = getPlayerNames()
        dropdownRef:SetValues(playerNames)
        dropdownRef:SetValue(playerNames[1] or "")
        selectedPlayerName = playerNames[1]
    end
})

--// Copy Stats Button (formatted like your Anti AFK)
Tabs.mainTab:CreateButton({
    Title = "Copy Player Stats",
    Description = "Copies all selected player's stats to clipboard.",
    Callback = function()

        if not selectedPlayerName then return end

        local playerFolder = workspace:FindFirstChild(selectedPlayerName)
        if not playerFolder then return end

        local result = "===== " .. selectedPlayerName .. " =====\n"

        local otherData = playerFolder:FindFirstChild("OtherData")
        local secondStats = playerFolder:FindFirstChild("SecondStats")
        local leaderstats = secondStats and secondStats:FindFirstChild("leaderstats")
        local locked = playerFolder:FindFirstChild("Locked")

        -- Main Stats
        for _, statName in ipairs(mainStats) do
            result = result .. statName .. ": " .. getValue(otherData, statName) .. "\n"
        end

        -- SecondStats â†’ leaderstats
        for _, statName in ipairs(secondLeaderStats) do
            result = result .. statName .. ": " .. getValue(leaderstats, statName) .. "\n"
        end

        -- Locked
        for _, statName in ipairs(lockedStats) do
            result = result .. "Locked_" .. statName .. ": " .. getValue(locked, statName) .. "\n"
        end

        if setclipboard then
            setclipboard(result)
        end

        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "Stats Copied",
            Text = "Copied stats for " .. selectedPlayerName,
            Duration = 3
        })
    end
})

Tabs.mainTab:CreateButton({
    Title = "Anti Lag",
    Description = "Decrease quality to not lag.",
    Callback = function()
        local Lighting = game:GetService("Lighting")
        local RunService = game:GetService("RunService")
        local Terrain = workspace:FindFirstChildWhichIsA("Terrain")

        -- Terrain settings
        if Terrain then
            Terrain.WaterWaveSize = 0
            Terrain.WaterWaveSpeed = 0
            Terrain.WaterReflectance = 0
            Terrain.WaterTransparency = 1
        end

        -- Lighting settings
        Lighting.GlobalShadows = false
        Lighting.FogStart = 9e9
        Lighting.FogEnd = 9e9
        settings().Rendering.QualityLevel = 1

        -- Optimize workspace parts
        for _, v in pairs(game:GetDescendants()) do
            if v:IsA("BasePart") then
                v.CastShadow = false
                v.Material = "Plastic"
                v.Reflectance = 0
                v.BackSurface = Enum.SurfaceType.SmoothNoOutlines
                v.BottomSurface = Enum.SurfaceType.SmoothNoOutlines
                v.FrontSurface = Enum.SurfaceType.SmoothNoOutlines
                v.LeftSurface = Enum.SurfaceType.SmoothNoOutlines
                v.RightSurface = Enum.SurfaceType.SmoothNoOutlines
                v.TopSurface = Enum.SurfaceType.SmoothNoOutlines
            elseif v:IsA("Decal") then
                v.Transparency = 1
                v.Texture = ""
            elseif v:IsA("ParticleEmitter") or v:IsA("Trail") then
                v.Lifetime = NumberRange.new(0)
            end
        end

        -- Disable post effects in Lighting
        for _, v in pairs(Lighting:GetDescendants()) do
            if v:IsA("PostEffect") then
                v.Enabled = false
            end
        end

        -- Remove new unwanted objects dynamically
        workspace.DescendantAdded:Connect(function(child)
            task.spawn(function()
                if child:IsA("ForceField") or child:IsA("Sparkles") or child:IsA("Smoke") or child:IsA("Fire") or child:IsA("Beam") then
                    RunService.Heartbeat:Wait()
                    child:Destroy()
                elseif child:IsA("BasePart") then
                    child.CastShadow = false
                end
            end)
        end)
    end
})

--------------------------------------------------
-- CONFIGURATION / MANAGERS
--------------------------------------------------

SaveManager:SetLibrary(Library)
InterfaceManager:SetLibrary(Library)

SaveManager:IgnoreThemeSettings()
SaveManager:SetIgnoreIndexes({})

InterfaceManager:SetFolder("FluentEventsHub")
SaveManager:SetFolder("FluentEventsHub/SpecificGame")

InterfaceManager:BuildInterfaceSection(Tabs.Settings)
SaveManager:BuildConfigSection(Tabs.Settings)

Window:SelectTab(1)
Library:Notify{Title = "Fluent", Content = "Script loaded successfully!", Duration = 8}
SaveManager:LoadAutoloadConfig()
