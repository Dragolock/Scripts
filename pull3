-- Load Fluent
local Library = loadstring(game:HttpGetAsync("https://github.com/ActualMasterOogway/Fluent-Renewed/releases/latest/download/Fluent.luau"))()
local SaveManager = loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/ActualMasterOogway/Fluent-Renewed/master/Addons/SaveManager.luau"))()
local InterfaceManager = loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/ActualMasterOogway/Fluent-Renewed/master/Addons/InterfaceManager.luau"))()

local Window = Library:Window{
    Title = "Pull A Sword",
    SubTitle = "By coco",
    TabWidth = 160,
    Size =  UDim2.fromOffset(580, 460),
    Resize = false, 
    Theme = "Darker",
    MinimizeKey = Enum.KeyCode.LeftShift
}

-- Tabs
local Tabs = {
    MainGame = Window:CreateTab{Title = "Main Game", Icon = "ph-users"},
    Bosses = Window:CreateTab{Title = "Bosses", Icon = "ph-skull"},
    Worlds = Window:CreateTab{Title = "Worlds/Secret Worlds", Icon = "ph-globe"},
    PvP = Window:CreateTab{Title = "PvP Stuff", Icon = "ph-sword"},
    Events = Window:CreateTab{Title = "Events", Icon = "ph-flame"},
    Fishing = Window:CreateTab{Title = "Fishing Event", Icon = "ph-fish"},
    Halloween = Window:CreateTab{Title = "Halloween", Icon = "ph-pumpkin"}
}

-- MAIN GAME
-- Auto Click
local AutoClick = Tabs.MainGame:CreateToggle("AutoClick", {Title = "Auto Click", Default = false})
AutoClick:OnChanged(function(state)
    if state then
        task.spawn(function()
            while AutoClick.Value do
                game.ReplicatedStorage.Remotes.Events.ClickEvent:FireServer()
                task.wait()
            end
        end)
    end
end)

-- Hatch Nearest
local eggList = {
    "W1E1","W2E1","W3E1","W4E1","W5E1","W6E1","W7E1","W8E1","W9E1","W10E1",
    "W11E1","W12E1","W13E1","W14E1","W15E1","W16E1","W17E1","W18E1","W19E1","W20E1",
    "W21E1","W22E1","W23E1","W24E1","W25E1","W26E1","W27E1","W28E1","W29E1","W30E1",
    "W31E1","W32E1","W33E1","W34E1","W35E1","Common Egg"
}
local HatchNearest = Tabs.MainGame:CreateToggle("HatchNearest", {Title = "Hatch Nearest", Default = false})
HatchNearest:OnChanged(function(state)
    if state then
        task.spawn(function()
            while HatchNearest.Value do
                for _, egg in ipairs(eggList) do
                    game.ReplicatedStorage.GameClient.Events.RemoteFunction.BuyEgg:InvokeServer(egg,"Buy1")
                end
                task.wait(0.3)
            end
        end)
    end
end)

-- Auto Spin Wheel
local AutoSpinWheel = Tabs.MainGame:CreateToggle("AutoSpinWheel", {Title = "Auto Spin Wheel", Default = false})
AutoSpinWheel:OnChanged(function(state)
    if state then
        task.spawn(function()
            while AutoSpinWheel.Value do
                game.ReplicatedStorage.GameClient.Events.RemoteEvent.SpaceEggEvent:FireServer()
                task.wait(20)
            end
        end)
    end
end)

-- Complete Quests
Tabs.MainGame:CreateButton{
    Title = "Complete Quests",
    Callback = function()
        local remotes = game:GetService("ReplicatedStorage").Remotes.Events
        remotes.RemoveC:FireServer(1)
        task.wait()
        remotes.WorldWheelEvent:FireServer("5")
        remotes.OnStandartShopRequest:FireServer("Buy", 2, 3)
        remotes.OnStandartShopRequest:FireServer("Buy", 2, 1)
        task.wait()
        remotes.PortalC:FireServer("1", true)
        task.wait(1)
        remotes.PortalC:FireServer("2", true)
        task.wait(1)
        remotes.PortalC:FireServer("1", true)
        task.wait(1)
        remotes.PortalC:FireServer("2", true)
        task.wait(1)
        remotes.PortalC:FireServer("1", true)
        task.wait(1)
        remotes.PortalC:FireServer("2", true)
        task.wait(2)
        for i = 1, 10 do
            remotes.WinEvent:FireServer("5")
            task.wait(2)
        end
        task.wait(2)
        for i = 1, 25 do
            remotes.WinBossEvent:FireServer("Boss1")
            task.wait(0.1)
        end
        remotes.RemoveC:FireServer(0)
        task.wait(120)
        local dailyArgs = {
            {"Daily", "UseOnSideSystem"},
            {"Daily", "Defeat10Enemies"},
            {"Daily", "Pull10Swords"},
            {"Daily", "Click1000Times"},
            {"Daily", "Win20MillionPower"},
            {"Daily", "GoTo5Worlds"},
            {"Daily", "PlayFor60Minutes"},
            {"Daily", "BuyItemsAtStore"},
            {"Daily", "Complete10Quests"},
        }
        for _, args in ipairs(dailyArgs) do
            remotes.ClaimQuest:FireServer(unpack(args))
            task.wait(0.5)
        end
    end
}

-- Anti AFK / Anti Lag
Tabs.MainGame:CreateButton{
    Title = "Antiafk & Antilag",
    Callback = function()
        game:GetService('Players').LocalPlayer.Idled:Connect(function()
            game:GetService('VirtualUser'):CaptureController()
            game:GetService('VirtualUser'):ClickButton2(Vector2.new())
        end)
        local g = game
        local w = g.Workspace
        local l = g.Lighting
        local t = w.Terrain
        t.WaterWaveSize, t.WaterWaveSpeed, t.WaterReflectance, t.WaterTransparency = 0,0,0,0
        l.GlobalShadows, l.FogEnd, l.Brightness = false, 9e9, 0
        settings().Rendering.QualityLevel = "Level01"
        for i, v in pairs(g:GetDescendants()) do
            if v:IsA("Part") or v:IsA("Union") or v:IsA("CornerWedgePart") or v:IsA("TrussPart") then
                v.Material, v.Reflectance = "Plastic", 0
            elseif v:IsA("Decal") or v:IsA("Texture") then
                v.Transparency = 1
            elseif v:IsA("ParticleEmitter") or v:IsA("Trail") then
                v.Lifetime = NumberRange.new(0)
            elseif v:IsA("Explosion") then
                v.BlastPressure, v.BlastRadius = 1,1
            elseif v:IsA("Fire") or v:IsA("SpotLight") or v:IsA("Smoke") then
                v.Enabled = false
            elseif v:IsA("MeshPart") then
                v.Material, v.Reflectance, v.TextureID = "Plastic", 0, ""
            end
        end
        for i, e in pairs(l:GetChildren()) do
            if e:IsA("BlurEffect") or e:IsA("SunRaysEffect") or e:IsA("ColorCorrectionEffect") or e:IsA("BloomEffect") or e:IsA("DepthOfFieldEffect") then
                e.Enabled = false
            end
        end
    end
}

bossTab:CreateParagraph("BossInfo", {
    Title = "Info",
    Content = "TP Lab/Ocean = Crystals.",
    TitleAlignment = "Left",
    ContentAlignment = Enum.TextXAlignment.Left
})

-- Generate Crystals
local GenCrystals = bossTab:CreateToggle("GenCrystals", {Title = "Generate Crystals", Default = false})
GenCrystals:OnChanged(function(state)
    local r = game.ReplicatedStorage.Remotes.Events
    if state then
        r.RemoveC:FireServer(1)
        task.spawn(function()
            while GenCrystals.Value do
                for i = 1, 20 do
                    r.WinMegaBossEvent:FireServer("Dragon6", "Chaos")
                end
                task.wait()
            end
        end)
    else
        r.RemoveC:FireServer(0)
    end
end)

-- Spin Crystal Wheels
local SpinWheel = bossTab:CreateToggle("SpinWheel", {Title = "Spin Crystal Wheels", Default = false})
SpinWheel:OnChanged(function(state)
    if state then
        task.spawn(function()
            while SpinWheel.Value do
                local r = game.ReplicatedStorage.Remotes.Events
                r.WorldWheelEvent:FireServer("5")
                r.SpinWheelSecret:FireServer("-8", "563")
                r.WorldWheelEvent:FireServer("6")
                task.wait(1)
            end
        end)
    end
end)

-- Kill Title Boss
local KillBoss = bossTab:CreateToggle("KillBoss", {Title = "Kill Title Boss", Default = false})
KillBoss:OnChanged(function(state)
    local r = game.ReplicatedStorage.Remotes.Events
    if state then
        r.RemoveC:FireServer(1)
        task.wait(0.1)
        local bossMap = {
            ["The King"]="Boss1", ["Dravenar"]="Boss2", ["Glacius"]="Boss3", ["Anubis"]="Boss4",
            ["Bossbot"]="Boss5", ["Lazyfish"]="Boss6", ["Yokai"]="Boss7", ["Vort3x"]="Boss8",
            ["Underlord"]="Boss9", ["The Conquerer"]="Boss10",
        }
        local chosen = bossMap[Options.BossTarget.Value] or "Boss1"
        task.spawn(function()
            while KillBoss.Value do
                r.WinBossEvent:FireServer(chosen)
                task.wait(0.2)
            end
        end)
    else
        r.RemoveC:FireServer(0)
    end
end)

local BossTarget = bossTab:CreateDropdown("BossTarget", {
    Title = "Select Boss",
    Values = {"The King","Dravenar","Glacius","Anubis","Bossbot","Lazyfish","Yokai","Vort3x","Underlord","The Conquerer"},
    Multi = false,
    Default = 1
})

BossTarget:OnChanged(function(value)
    if KillBoss.Value then
    end
end)

